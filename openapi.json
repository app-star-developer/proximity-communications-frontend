{"openapi":"3.1.0","info":{"title":"Proximity Communications API","version":"0.1.0","description":"HTTP API for managing proximity marketing campaigns, venues, notifications, and analytics. All authenticated routes require a bearer access token issued by the authentication endpoints.\n"},"servers":[{"url":"https://api.proximity.example.com/api","description":"Production"},{"url":"https://staging.proximity.example.com/api","description":"Staging"},{"url":"http://localhost:3000/api","description":"Local development"}],"tags":[{"name":"Health"},{"name":"Authentication"},{"name":"Tenants"},{"name":"Tenant Users"},{"name":"Campaigns"},{"name":"Events"},{"name":"Geofencing"},{"name":"Notifications"},{"name":"Venues"},{"name":"Users"}],"paths":{"/v1/health":{"get":{"tags":["Health"],"summary":"Liveness probe","description":"Returns service health status.","operationId":"getHealthStatus","responses":{"200":{"description":"Service is healthy.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Authenticate with email and password","description":"Issues an access token and refresh token for a tenant user or platform superuser. For platform users, omit the `tenant` field. For tenant-bound users, provide the `tenant` slug. Platform users will receive a list of accessible tenants in the response.\n","operationId":"login","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthLoginRequest"}}}},"responses":{"200":{"description":"Authentication successful.","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/AuthTokenResponse"},{"$ref":"#/components/schemas/PlatformAuthTokenResponse"}]}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Invalid email/password combination.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodedErrorResponse"}}}},"403":{"description":"Tenant or user account is suspended or disabled.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodedErrorResponse"}}}},"500":{"description":"Authentication failed due to a server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh authentication tokens","description":"Exchanges a valid refresh token for a new access token.","operationId":"refreshAuthentication","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRefreshRequest"}}}},"responses":{"200":{"description":"Refresh succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthTokenResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Refresh token was invalid or expired.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodedErrorResponse"}}}},"500":{"description":"Token refresh failed due to a server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/auth/accessible-tenants":{"get":{"tags":["Authentication"],"summary":"Get accessible tenants for authenticated user","description":"Returns a list of tenants that the authenticated user can access. For platform users, returns all tenants. For tenant-bound users, returns only their assigned tenant.\n","operationId":"getAccessibleTenants","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of accessible tenants returned successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessibleTenantsResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to retrieve accessible tenants.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/auth/logout":{"post":{"tags":["Authentication"],"summary":"Revoke the current session","description":"Invalidates the caller's refresh token and session.","operationId":"logout","security":[{"bearerAuth":[]}],"responses":{"204":{"description":"Session revoked successfully."},"401":{"description":"Request lacked a valid authentication context.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/auth/password/forgot":{"post":{"tags":["Authentication"],"summary":"Request password reset","description":"Initiates a password reset email for the provided tenant and email address.","operationId":"requestPasswordReset","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthForgotPasswordRequest"}}}},"responses":{"202":{"description":"Password reset request accepted.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetAcknowledgement"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"500":{"description":"Server was unable to process the reset request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/auth/password/reset":{"post":{"tags":["Authentication"],"summary":"Reset password","description":"Resets the password for a user using a valid reset token.","operationId":"resetPassword","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResetPasswordRequest"}}}},"responses":{"200":{"description":"Password reset succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"400":{"description":"Reset token was invalid or expired.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to apply the password reset.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/users/me":{"get":{"tags":["Users"],"summary":"Retrieve authenticated user profile","description":"Returns the authenticated user's profile and current session identifier.","operationId":"getCurrentUserProfile","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Profile returned successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/tenants":{"get":{"tags":["Tenants"],"summary":"List all tenants (Platform Superuser Only)","description":"Returns a list of all tenants in the system. Requires platform:tenants:read permission. Supports optional filtering by status and search query.\n","operationId":"listTenants","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["active","suspended"]},"description":"Filter tenants by status."},{"in":"query","name":"search","schema":{"type":"string"},"description":"Case-insensitive search applied to tenant names and slugs."},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Maximum number of tenants to return."},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of tenants to skip before collecting results."}],"responses":{"200":{"description":"List of tenants returned successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantListResponse"}}}},"400":{"description":"Query parameters failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have platform:tenants:read permission.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to list tenants.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"post":{"tags":["Tenants"],"summary":"Create a new tenant (Platform Superuser Only)","description":"Creates a new tenant along with a primary administrator account. Requires platform:tenants:create permission. Self-service signup is disabled.\n","operationId":"createTenant","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTenantRequest"}}}},"responses":{"201":{"description":"Tenant created successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have platform:tenants:create permission.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"409":{"description":"A tenant already exists with the provided slug.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodedErrorResponse"}}}},"500":{"description":"Server failed to create the tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/tenants/{tenantId}":{"get":{"tags":["Tenants"],"summary":"Get tenant by ID (Platform Superuser Only)","description":"Retrieves detailed information about a specific tenant. Requires platform:tenants:read permission.\n","operationId":"getTenantById","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"}],"responses":{"200":{"description":"Tenant returned successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have platform:tenants:read permission.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Tenant not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to retrieve tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"patch":{"tags":["Tenants"],"summary":"Update tenant (Platform Superuser Only)","description":"Updates mutable fields on a tenant. Requires platform:tenants:update permission.\n","operationId":"updateTenant","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTenantRequest"}}}},"responses":{"200":{"description":"Tenant updated successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have platform:tenants:update permission.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Tenant not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to update tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/tenants/{tenantId}/suspend":{"post":{"tags":["Tenants"],"summary":"Suspend tenant (Platform Superuser Only)","description":"Suspends a tenant, preventing all users from accessing tenant resources. Requires platform:tenants:suspend permission.\n","operationId":"suspendTenant","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"}],"responses":{"200":{"description":"Tenant suspended successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have platform:tenants:suspend permission.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Tenant not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to suspend tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/tenants/{tenantId}/activate":{"post":{"tags":["Tenants"],"summary":"Activate tenant (Platform Superuser Only)","description":"Activates a suspended tenant, restoring user access. Requires platform:tenants:update permission.\n","operationId":"activateTenant","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"}],"responses":{"200":{"description":"Tenant activated successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have platform:tenants:update permission.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Tenant not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to activate tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/tenants/{tenantId}/users":{"get":{"tags":["Tenant Users"],"summary":"List users with access to a tenant","description":"Returns all users who have been granted access to the specified tenant. Requires admin access level for the tenant or platform superuser permissions. Platform users must include X-Tenant-Context header.\n","operationId":"listTenantUsers","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"},{"$ref":"#/components/parameters/TenantContextHeader"}],"responses":{"200":{"description":"List of tenant users returned successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantUserListResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have sufficient access level.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to list tenant users.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/tenants/{tenantId}/users/invite":{"post":{"tags":["Tenant Users"],"summary":"Invite user to tenant","description":"Invites a new user or grants access to an existing user for the specified tenant. Requires admin access level for the tenant or platform superuser permissions. Platform users must include X-Tenant-Context header.\n","operationId":"inviteUserToTenant","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"},{"$ref":"#/components/parameters/TenantContextHeader"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteUserRequest"}}}},"responses":{"201":{"description":"User invited successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantUserResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have sufficient access level.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"409":{"description":"User already has access to this tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodedErrorResponse"}}}},"500":{"description":"Server failed to invite user.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/tenants/{tenantId}/users/{userId}":{"patch":{"tags":["Tenant Users"],"summary":"Update user access level","description":"Updates the access level for a user within the specified tenant. Requires admin access level for the tenant or platform superuser permissions. Platform users must include X-Tenant-Context header.\n","operationId":"updateUserTenantAccess","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"},{"$ref":"#/components/parameters/UserIdPathParam"},{"$ref":"#/components/parameters/TenantContextHeader"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserAccessRequest"}}}},"responses":{"200":{"description":"User access updated successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantUserResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have sufficient access level.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"User or tenant access not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to update user access.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"delete":{"tags":["Tenant Users"],"summary":"Remove user from tenant","description":"Revokes a user's access to the specified tenant. Requires admin access level for the tenant or platform superuser permissions. Platform users must include X-Tenant-Context header.\n","operationId":"removeUserFromTenant","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/TenantIdPathParam"},{"$ref":"#/components/parameters/UserIdPathParam"},{"$ref":"#/components/parameters/TenantContextHeader"}],"responses":{"204":{"description":"User removed from tenant successfully."},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"User does not have sufficient access level.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"User or tenant access not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to remove user from tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/campaigns":{"get":{"tags":["Campaigns"],"summary":"List campaigns","description":"Returns campaigns for the caller's tenant.","operationId":"listCampaigns","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/CampaignStatusParam"},{"$ref":"#/components/parameters/CampaignLimitParam"},{"$ref":"#/components/parameters/CampaignOffsetParam"}],"responses":{"200":{"description":"List of campaigns.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignListResponse"}}}},"400":{"description":"Query parameters failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"post":{"tags":["Campaigns"],"summary":"Create a campaign","description":"Creates a campaign within the caller's tenant.","operationId":"createCampaign","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCampaignRequest"}}}},"responses":{"201":{"description":"Campaign created successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"400":{"description":"Validation failed or venues did not belong to tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorOrMessageResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/campaigns/{campaignId}":{"get":{"tags":["Campaigns"],"summary":"Retrieve a campaign","description":"Fetches a campaign by ID within the caller's tenant.","operationId":"getCampaign","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/CampaignIdPathParam"}],"responses":{"200":{"description":"Campaign found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Campaign not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"put":{"tags":["Campaigns"],"summary":"Update a campaign","description":"Updates mutable fields on a campaign.","operationId":"updateCampaign","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/CampaignIdPathParam"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCampaignRequest"}}}},"responses":{"200":{"description":"Campaign updated successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"400":{"description":"Validation failed or venues did not belong to tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorOrMessageResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Campaign not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"delete":{"tags":["Campaigns"],"summary":"Cancel a campaign","description":"Cancels a campaign and marks it inactive.","operationId":"cancelCampaign","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/CampaignIdPathParam"}],"responses":{"204":{"description":"Campaign cancelled successfully."},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"Campaign not found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/events":{"post":{"tags":["Events"],"summary":"Record events","description":"Records user, campaign, or notification events for analytics.","operationId":"recordEvents","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventIngestRequest"}}}},"responses":{"202":{"description":"Events accepted for recording.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventIngestResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/events/analytics/timeseries":{"get":{"tags":["Events"],"summary":"Fetch timeseries analytics","description":"Returns aggregated event counts grouped by hour or day.","operationId":"getEventTimeseries","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/AnalyticsStartParam"},{"$ref":"#/components/parameters/AnalyticsEndParam"},{"$ref":"#/components/parameters/EventTypeParam"},{"$ref":"#/components/parameters/AnalyticsCampaignParam"},{"$ref":"#/components/parameters/AnalyticsVenueParam"},{"$ref":"#/components/parameters/AnalyticsGranularityParam"}],"responses":{"200":{"description":"Timeseries analytics data returned.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventTimeseriesResponse"}}}},"400":{"description":"Query parameters failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/events/analytics/summary":{"get":{"tags":["Events"],"summary":"Fetch summary analytics","description":"Returns aggregated event counts grouped by event type.","operationId":"getEventSummary","security":[{"bearerAuth":[]}],"parameters":[{"$ref":"#/components/parameters/AnalyticsStartParam"},{"$ref":"#/components/parameters/AnalyticsEndParam"},{"$ref":"#/components/parameters/EventTypeParam"},{"$ref":"#/components/parameters/AnalyticsCampaignParam"},{"$ref":"#/components/parameters/AnalyticsVenueParam"},{"$ref":"#/components/parameters/AnalyticsGranularityParam"}],"responses":{"200":{"description":"Summary analytics data returned.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventSummaryResponse"}}}},"400":{"description":"Query parameters failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/geofencing/evaluate":{"post":{"tags":["Geofencing"],"summary":"Evaluate device locations","description":"Evaluates a batch of device location pings against active geofences.","operationId":"evaluateLocations","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeofenceEvaluationRequest"}}}},"responses":{"202":{"description":"Evaluation accepted.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeofenceEvaluationResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/notifications":{"post":{"tags":["Notifications"],"summary":"Send push notifications","description":"Sends push notifications to a batch of Expo tokens.","operationId":"sendNotifications","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationSendRequest"}}}},"responses":{"202":{"description":"Notifications accepted for delivery.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationSendResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/notifications/receipts":{"post":{"tags":["Notifications"],"summary":"Submit delivery receipts","description":"Submits delivery receipts for previously sent notifications.","operationId":"submitNotificationReceipts","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationReceiptsRequest"}}}},"responses":{"202":{"description":"Receipts accepted for processing.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationReceiptsResponse"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server-side processing failure.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/venues":{"post":{"tags":["Venues"],"summary":"Create venue","description":"Creates a single venue for the authenticated tenant.","operationId":"createVenue","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVenueRequest"}}}},"responses":{"201":{"description":"Venue created successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Venue"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"409":{"description":"Venue slug already exists for this tenant.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodedErrorResponse"}}}},"500":{"description":"Server failed to create the venue.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}},"get":{"tags":["Venues"],"summary":"List venues","description":"Returns venues for the authenticated tenant with optional pagination and search.","operationId":"listVenues","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Maximum number of venues to return."},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of venues to skip before collecting results."},{"in":"query","name":"search","schema":{"type":"string"},"description":"Case-insensitive search applied to venue names."},{"in":"query","name":"primaryType","schema":{"oneOf":[{"type":"array","items":{"$ref":"#/components/schemas/VenuePrimaryType"}},{"$ref":"#/components/schemas/VenuePrimaryType"}]},"description":"Filter venues by primary type. Can be a single type or array of types.","style":"form","explode":false},{"in":"query","name":"isShared","schema":{"type":"boolean"},"description":"Filter venues by shared status. If true, returns only shared venues. If false, returns only tenant-owned venues. If omitted, returns both."},{"in":"query","name":"city","schema":{"type":"string"},"description":"Filter venues by city."},{"in":"query","name":"region","schema":{"type":"string"},"description":"Filter venues by region/state."},{"in":"query","name":"countryCode","schema":{"type":"string","pattern":"^[A-Z]{2}$"},"description":"Filter venues by ISO-2 country code."}],"responses":{"200":{"description":"Venues returned successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VenueListResponse"}}}},"400":{"description":"Query parameters failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Server failed to list venues.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/venues/places-preview":{"get":{"tags":["Venues"],"summary":"Preview Google Places venues","description":"Returns venues from Google Places without ingesting them so the client can choose which to create.","operationId":"previewGooglePlacesVenues","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"textQuery","schema":{"type":"string"},"required":true,"description":"Search query passed to Google Places Text Search."},{"in":"query","name":"latitude","schema":{"type":"number","minimum":-90,"maximum":90},"description":"Optional latitude used as the center of a circular bias."},{"in":"query","name":"longitude","schema":{"type":"number","minimum":-180,"maximum":180},"description":"Optional longitude used as the center of a circular bias."},{"in":"query","name":"radiusMeters","schema":{"type":"number","minimum":50,"maximum":5000},"description":"Optional radius (in meters) applied when latitude and longitude are provided."},{"in":"query","name":"pageSize","schema":{"type":"integer","minimum":1,"maximum":20},"description":"Number of results to return (default is the smaller of tenant batch size and 20)."}],"responses":{"200":{"description":"Preview returned successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VenuePlacesPreviewResponse"}}}},"400":{"description":"Query parameters failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"401":{"description":"Missing or invalid authentication.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"500":{"description":"Failed to fetch preview results.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/venues/manual-import":{"post":{"tags":["Venues"],"summary":"Ingest venues from CSV","description":"Parses and ingests venues contained in a CSV payload.","operationId":"ingestVenuesManual","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VenueManualImportRequest"}}}},"responses":{"202":{"description":"Ingestion accepted.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VenueIngestionResult"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"500":{"description":"Ingestion failed due to a server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/v1/venues/places-sync":{"post":{"tags":["Venues"],"summary":"Ingest venues from Google Places","description":"Fetches and ingests venues using the Google Places Text Search API.","operationId":"ingestVenuesFromPlaces","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VenuePlacesSyncRequest"}}}},"responses":{"202":{"description":"Ingestion accepted.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VenueIngestionResult"}}}},"400":{"description":"Request body failed validation.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}},"500":{"description":"Ingestion failed due to a server error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"HealthResponse":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]}},"required":["status"]},"AuthLoginRequest":{"type":"object","properties":{"tenant":{"type":"string","description":"Tenant slug. Optional for platform superusers, required for tenant-bound users."},"email":{"type":"string","format":"email"},"password":{"type":"string","format":"password","minLength":8}},"required":["email","password"]},"AuthRefreshRequest":{"type":"object","properties":{"refreshToken":{"type":"string","minLength":1}},"required":["refreshToken"]},"AuthenticatedUser":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"tenantId":{"type":"string","format":"uuid","nullable":true,"description":"Tenant ID for tenant-bound users. Null for platform superusers."},"tenantSlug":{"type":"string","nullable":true,"description":"Tenant slug for tenant-bound users. Null for platform superusers."},"isPlatformUser":{"type":"boolean","description":"Indicates if the user is a platform superuser."},"roles":{"type":"array","items":{"type":"string"}},"permissions":{"type":"array","items":{"type":"string"}}},"required":["id","email","isPlatformUser","roles","permissions"]},"AuthTokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"accessTokenExpiresAt":{"type":"string","format":"date-time"},"refreshTokenExpiresAt":{"type":"string","format":"date-time"},"sessionId":{"type":"string","format":"uuid"},"user":{"$ref":"#/components/schemas/AuthenticatedUser"}},"required":["accessToken","refreshToken","accessTokenExpiresAt","refreshTokenExpiresAt","sessionId","user"]},"UserProfileResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/AuthenticatedUser"},"sessionId":{"type":"string","format":"uuid"}},"required":["user","sessionId"]},"PlatformAuthTokenResponse":{"allOf":[{"$ref":"#/components/schemas/AuthTokenResponse"},{"type":"object","properties":{"accessibleTenants":{"type":"array","items":{"$ref":"#/components/schemas/AccessibleTenant"},"description":"List of tenants the platform user can access."}},"required":["accessibleTenants"]}]},"AccessibleTenant":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"slug":{"type":"string"},"accessLevel":{"$ref":"#/components/schemas/AccessLevel"}},"required":["id","name","slug","accessLevel"]},"AccessibleTenantsResponse":{"type":"object","properties":{"tenants":{"type":"array","items":{"$ref":"#/components/schemas/AccessibleTenant"}}},"required":["tenants"]},"AccessLevel":{"type":"string","enum":["viewer","editor","admin"],"description":"Access level for a user within a tenant: - viewer: Read-only access to campaigns, events, analytics, and venues - editor: Read and write access to campaigns, events, and venues - admin: Full access including user management\n**Managed Service Model**: Business users should always be invited with 'viewer'  access level for read-only access to their dashboards. Platform superusers  automatically get 'admin' access when managing any tenant.\n"},"AuthForgotPasswordRequest":{"type":"object","properties":{"tenant":{"type":"string","description":"Tenant slug for the user requesting a reset."},"email":{"type":"string","format":"email"}},"required":["tenant","email"]},"AuthResetPasswordRequest":{"type":"object","properties":{"token":{"type":"string","description":"Reset token provided in the password reset email."},"password":{"type":"string","format":"password","minLength":8}},"required":["token","password"]},"PasswordResetAcknowledgement":{"type":"object","properties":{"message":{"type":"string"},"resetToken":{"type":"string","description":"Reset token returned in non-production environments."}},"required":["message"]},"CreateTenantRequest":{"type":"object","properties":{"tenantName":{"type":"string","minLength":1,"maxLength":200,"description":"Name of the tenant organization."},"tenantSlug":{"type":"string","pattern":"^[a-z0-9]+(?:-[a-z0-9]+)*$","description":"Optional custom slug for the tenant. Defaults to a slugified tenant name."},"contactEmail":{"type":"string","format":"email","description":"Primary contact email for the tenant."},"adminEmail":{"type":"string","format":"email","description":"Email address for the tenant's primary administrator account."},"password":{"type":"string","format":"password","minLength":8,"description":"Password for the tenant administrator account."},"firstName":{"type":"string","maxLength":100,"description":"First name of the tenant administrator."},"lastName":{"type":"string","maxLength":100,"description":"Last name of the tenant administrator."}},"required":["tenantName","adminEmail","password"]},"UpdateTenantRequest":{"type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":200},"contactEmail":{"type":"string","format":"email"},"metadata":{"type":"object","additionalProperties":true}},"description":"Partial update payload. Provide only the fields that should be changed."},"TenantResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"slug":{"type":"string"},"status":{"type":"string","enum":["active","suspended"]},"contactEmail":{"type":"string","format":"email","nullable":true},"metadata":{"type":"object","additionalProperties":true,"nullable":true},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","name","slug","status","createdAt","updatedAt"]},"TenantListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/TenantResponse"}},"pagination":{"type":"object","properties":{"limit":{"type":"integer"},"offset":{"type":"integer"},"count":{"type":"integer"}},"required":["limit","offset","count"]}},"required":["data","pagination"]},"InviteUserRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"Email address of the user to invite."},"password":{"type":"string","format":"password","minLength":8,"description":"Initial password for the user account."},"firstName":{"type":"string","maxLength":100},"lastName":{"type":"string","maxLength":100},"accessLevel":{"$ref":"#/components/schemas/AccessLevel"},"expiresAt":{"type":"string","format":"date-time","description":"Optional expiration date for the user's access to this tenant."}},"required":["email","password","accessLevel"]},"UpdateUserAccessRequest":{"type":"object","properties":{"accessLevel":{"$ref":"#/components/schemas/AccessLevel"},"expiresAt":{"type":"string","format":"date-time","nullable":true,"description":"Optional expiration date for the user's access. Set to null to remove expiration."}},"required":["accessLevel"]},"TenantUserResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string","format":"email"},"firstName":{"type":"string","nullable":true},"lastName":{"type":"string","nullable":true},"status":{"type":"string","enum":["invited","active","suspended"]},"accessLevel":{"$ref":"#/components/schemas/AccessLevel"},"grantedAt":{"type":"string","format":"date-time"},"expiresAt":{"type":"string","format":"date-time","nullable":true}},"required":["id","email","status","accessLevel","grantedAt"]},"TenantUserListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/TenantUserResponse"}}},"required":["data"]},"ValidationErrorResponse":{"type":"object","properties":{"errors":{"type":"object","additionalProperties":{"type":"array","items":{"type":"string"}}}},"required":["errors"]},"MessageResponse":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"]},"CodedErrorResponse":{"type":"object","properties":{"code":{"type":"string"},"message":{"type":"string"}},"required":["code","message"]},"ValidationErrorOrMessageResponse":{"oneOf":[{"$ref":"#/components/schemas/ValidationErrorResponse"},{"$ref":"#/components/schemas/MessageResponse"}]},"Campaign":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"tenantId":{"type":"string","format":"uuid"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"slug":{"type":"string"},"status":{"$ref":"#/components/schemas/CampaignStatus"},"startAt":{"type":"string","format":"date-time","nullable":true},"endAt":{"type":"string","format":"date-time","nullable":true},"radiusMeters":{"type":"number","format":"float","nullable":true},"timezone":{"type":"string","nullable":true},"budgetCents":{"type":"integer","format":"int64","nullable":true},"venueIds":{"type":"array","items":{"type":"string","format":"uuid"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","tenantId","name","slug","status","venueIds","createdAt","updatedAt"]},"CampaignListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Campaign"}}},"required":["data"]},"VenueFilters":{"type":"object","description":"Filters for selecting venues for a campaign. All filters are optional and can be combined.","properties":{"primaryType":{"type":"array","items":{"$ref":"#/components/schemas/VenuePrimaryType"},"description":"Filter by venue primary types."},"city":{"type":"string","description":"Filter by city."},"region":{"type":"string","description":"Filter by region/state."},"countryCode":{"type":"string","pattern":"^[A-Z]{2}$","description":"Filter by ISO-2 country code."},"radius":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180},"meters":{"type":"number","minimum":0}},"required":["latitude","longitude","meters"],"description":"Filter venues within a radius (in meters) from the specified coordinates."},"status":{"type":"string","enum":["active","draft","inactive"],"description":"Filter by venue status."},"isShared":{"type":"boolean","description":"Filter by shared status."}}},"CreateCampaignRequest":{"type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":120},"description":{"type":"string","maxLength":2000},"radiusMeters":{"type":"integer","minimum":10,"maximum":10000},"timezone":{"type":"string","maxLength":100},"startAt":{"type":"string","format":"date-time"},"endAt":{"type":"string","format":"date-time"},"budgetCents":{"type":"integer","minimum":0},"venueIds":{"type":"array","items":{"type":"string","format":"uuid"},"description":"Explicit list of venue IDs to include in the campaign."},"venueFilters":{"$ref":"#/components/schemas/VenueFilters","description":"Filters to dynamically select venues for the campaign. Either venueIds or venueFilters (or both) must be provided."},"status":{"$ref":"#/components/schemas/CampaignStatus"}},"required":["name"]},"UpdateCampaignRequest":{"allOf":[{"$ref":"#/components/schemas/CreateCampaignRequest"}],"description":"Partial update payload. Provide only the fields that should be changed.\n"},"CampaignStatus":{"type":"string","enum":["draft","scheduled","active","paused","completed","cancelled"]},"EventIngestRequest":{"type":"object","properties":{"events":{"type":"array","items":{"$ref":"#/components/schemas/EventInput"},"minItems":1}},"required":["events"]},"EventIngestResponse":{"type":"object","properties":{"recorded":{"type":"integer","minimum":0}},"required":["recorded"]},"EventInput":{"type":"object","properties":{"eventType":{"$ref":"#/components/schemas/EventType"},"occurredAt":{"type":"string","format":"date-time"},"campaignId":{"type":"string","format":"uuid"},"venueId":{"type":"string","format":"uuid"},"userId":{"type":"string","format":"uuid"},"sessionId":{"type":"string","format":"uuid"},"offerId":{"type":"string","format":"uuid"},"payload":{"type":"object","additionalProperties":true}},"required":["eventType"]},"EventType":{"type":"string","enum":["geofence_trigger","geofence_dwell","notification_sent","notification_opened","notification_delivery_error","impression","click","offer_viewed","offer_redeemed"]},"EventTimeseriesResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/EventTimeseriesPoint"}}},"required":["data"]},"EventTimeseriesPoint":{"type":"object","properties":{"period":{"type":"string","format":"date-time"},"count":{"type":"integer"}},"required":["period","count"]},"EventSummaryResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/EventSummaryItem"}}},"required":["data"]},"EventSummaryItem":{"type":"object","properties":{"eventType":{"type":"string"},"count":{"type":"integer"}},"required":["eventType","count"]},"GeofenceEvaluationRequest":{"type":"object","properties":{"locations":{"type":"array","items":{"$ref":"#/components/schemas/LocationPing"},"minItems":1}},"required":["locations"]},"GeofenceEvaluationResponse":{"type":"object","properties":{"triggers":{"type":"integer","minimum":0}},"required":["triggers"]},"LocationPing":{"type":"object","properties":{"deviceId":{"type":"string"},"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180},"accuracyMeters":{"type":"number","minimum":0},"occurredAt":{"type":"string","format":"date-time"}},"required":["deviceId","latitude","longitude"]},"NotificationSendRequest":{"type":"object","properties":{"to":{"type":"array","minItems":1,"items":{"type":"string"}},"title":{"type":"string","minLength":1},"body":{"type":"string"},"data":{"type":"object","additionalProperties":true},"campaignId":{"type":"string","format":"uuid"}},"required":["to","title"]},"NotificationSendResponse":{"type":"object","properties":{"tickets":{"type":"integer","minimum":0}},"required":["tickets"]},"NotificationReceiptsRequest":{"type":"object","properties":{"receipts":{"type":"array","minItems":1,"items":{"$ref":"#/components/schemas/NotificationReceipt"}}},"required":["receipts"]},"NotificationReceipt":{"type":"object","properties":{"ticketId":{"type":"string"},"status":{"type":"string","enum":["ok","error"]},"details":{"type":"object","additionalProperties":true}},"required":["ticketId","status"]},"NotificationReceiptsResponse":{"type":"object","properties":{"received":{"type":"integer","minimum":0}},"required":["received"]},"VenuePrimaryType":{"type":"string","enum":["hotel","restaurant","bar","cafe","mall","retail","entertainment","other"],"description":"Primary type/category of the venue."},"CreateVenueRequest":{"type":"object","properties":{"name":{"type":"string"},"slug":{"type":"string"},"description":{"type":"string"},"addressLine1":{"type":"string"},"addressLine2":{"type":"string"},"city":{"type":"string"},"region":{"type":"string"},"postalCode":{"type":"string"},"countryCode":{"type":"string"},"timezone":{"type":"string"},"latitude":{"type":"number"},"longitude":{"type":"number"},"externalId":{"type":"string"},"status":{"type":"string","enum":["draft","active","inactive"]},"primaryType":{"$ref":"#/components/schemas/VenuePrimaryType"},"isShared":{"type":"boolean","default":false,"description":"Whether this venue is shared and accessible to other tenants."},"metadata":{"type":"object","additionalProperties":true}},"required":["name"]},"Venue":{"allOf":[{"$ref":"#/components/schemas/CreateVenueRequest"},{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"tenantId":{"type":"string","format":"uuid"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}},"required":["id","tenantId","createdAt","updatedAt"]}]},"VenueListResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Venue"}},"pagination":{"type":"object","properties":{"limit":{"type":"integer"},"offset":{"type":"integer"},"count":{"type":"integer"}},"required":["limit","offset","count"]}},"required":["data","pagination"]},"VenueManualImportRequest":{"type":"object","properties":{"csvData":{"type":"string","description":"Raw CSV payload encoded as UTF-8 text."}},"required":["csvData"]},"VenuePlacesSyncRequest":{"type":"object","properties":{"tenantId":{"type":"string","format":"uuid"},"textQuery":{"type":"string"},"locationBias":{"$ref":"#/components/schemas/LocationBias"},"pageSize":{"type":"integer","minimum":1,"maximum":20}},"required":["tenantId","textQuery"]},"LocationBias":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180},"radiusMeters":{"type":"number","minimum":50,"maximum":5000}},"required":["latitude","longitude","radiusMeters"]},"VenueIngestionResult":{"type":"object","properties":{"inserted":{"type":"integer","minimum":0},"duplicates":{"type":"integer","minimum":0},"lowQuality":{"type":"integer","minimum":0},"records":{"type":"array","items":{"$ref":"#/components/schemas/NormalizedVenue"}}},"required":["inserted","duplicates","lowQuality","records"]},"VenuePlacesPreviewResponse":{"type":"object","properties":{"raw":{"type":"array","items":{"$ref":"#/components/schemas/GooglePlace"}},"venues":{"type":"array","items":{"$ref":"#/components/schemas/NormalizedVenue"}}},"required":["raw","venues"]},"GooglePlace":{"type":"object","description":"Raw Google Places record as returned by the Text Search API.","properties":{"id":{"type":"string"},"displayName":{"type":"object","properties":{"text":{"type":"string"}}},"shortFormattedAddress":{"type":"string"},"formattedAddress":{"type":"string"},"location":{"type":"object","properties":{"latitude":{"type":"number"},"longitude":{"type":"number"}}},"types":{"type":"array","items":{"type":"string"}},"primaryType":{"type":"string"},"internationalPhoneNumber":{"type":"string"},"rating":{"type":"number"},"userRatingCount":{"type":"integer"},"businessStatus":{"type":"string"}},"additionalProperties":true},"NormalizedVenue":{"type":"object","properties":{"tenantId":{"type":"string","format":"uuid"},"name":{"type":"string"},"slug":{"type":"string"},"description":{"type":"string"},"addressLine1":{"type":"string"},"addressLine2":{"type":"string"},"city":{"type":"string"},"region":{"type":"string"},"postalCode":{"type":"string"},"countryCode":{"type":"string"},"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180},"timezone":{"type":"string"},"externalId":{"type":"string"},"phoneNumber":{"type":"string"},"source":{"type":"string","enum":["manual","google_places"]},"categories":{"type":"array","items":{"type":"string"}},"raw":{"type":"object","additionalProperties":true},"metadata":{"type":"object","additionalProperties":true}},"required":["tenantId","name","slug","source","categories"]}},"parameters":{"CampaignStatusParam":{"name":"status","in":"query","required":false,"schema":{"$ref":"#/components/schemas/CampaignStatus"}},"CampaignLimitParam":{"name":"limit","in":"query","required":false,"schema":{"type":"integer","minimum":1,"maximum":100,"default":25}},"CampaignOffsetParam":{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0}},"CampaignIdPathParam":{"name":"campaignId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},"AnalyticsStartParam":{"name":"startAt","in":"query","schema":{"type":"string","format":"date-time"}},"AnalyticsEndParam":{"name":"endAt","in":"query","schema":{"type":"string","format":"date-time"}},"EventTypeParam":{"name":"eventType","in":"query","schema":{"$ref":"#/components/schemas/EventType"}},"AnalyticsCampaignParam":{"name":"campaignId","in":"query","schema":{"type":"string","format":"uuid"}},"AnalyticsVenueParam":{"name":"venueId","in":"query","schema":{"type":"string","format":"uuid"}},"AnalyticsGranularityParam":{"name":"granularity","in":"query","schema":{"type":"string","enum":["day","hour"],"default":"day"}},"TenantIdPathParam":{"name":"tenantId","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"description":"The unique identifier of the tenant."},"UserIdPathParam":{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"},"description":"The unique identifier of the user."},"TenantContextHeader":{"name":"X-Tenant-Context","in":"header","required":false,"schema":{"type":"string","format":"uuid"},"description":"Specifies which tenant's context to operate in. Required for platform superusers. Tenant-bound users can omit this header as their context is implicit.\n"}}}}